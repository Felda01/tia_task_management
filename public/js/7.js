(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{22:function(t,e,s){"use strict";s.r(e);var a=s(2),i=s.n(a),o={name:"ProjectDetail",computed:{sortedVersions:function(){if(this.project&&this.project.versions)return _.orderBy(this.project.versions,"end_date","asc")}},data:function(){return{project:null,loading:!1,formEditProject:new i.a({start_date:"",end_date:null,slug:"",title:"",client_id:""}),modalSchemaEditProject:{form:{url:"/api/projects/"+this.$route.params.slug,method:"put",fields:[],hiddenFields:[],config:{}},modalRef:"editProject",modalTitle:this.$t("project.edit.title.modal"),okBtnTitle:this.$t("modal.edit.btn")},modalSchemaAddVersion:{form:{url:"/api/versions",method:"post",fields:[{label:this.$t("version.title"),required:!0,name:"title",input:"text",type:"text",value:"",config:{}},{label:this.$t("version.end_date"),required:!0,name:"end_date",input:"date",type:"date",value:"",config:{}}],hiddenFields:[],config:{}},modalRef:"addVersion",modalTitle:this.$t("project.version.add.title.modal"),okBtnTitle:this.$t("modal.add.btn")},modalSchemaEditVersion:{form:{url:"",method:"put",fields:[],hiddenFields:[],config:{}},modalRef:"editVersion",modalTitle:this.$t("project.version.edit.title.modal"),okBtnTitle:this.$t("modal.edit.btn")}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.loading=!0,this.axios.get("/api/projects/"+this.$route.params.slug).then((function(e){t.project=e.data.data,t.loading=!1}))},sortedArray:function(t,e){return t.sort((function(t,s){return t[e]-s[e]}))},editProjectModal:function(){this.modalSchemaEditProject.form.fields=[{label:this.$t("project.title"),required:!0,name:"title",input:"text",type:"text",value:this.project.title,config:{}},{label:this.$t("project.status"),required:!0,name:"status",input:"select",type:"text",value:this.project.status,config:{options:[{text:"Active",value:"active"},{text:"Finished",value:"finished"},{text:"Closed",value:"closed"}]}},{label:this.$t("project.start_date"),required:!0,name:"start_date",input:"date",type:"date",value:this.project.start_date,config:{}},{label:this.$t("project.end_date"),required:!1,name:"end_date",input:"date",type:"date",value:this.project.end_date,config:{}}],this.$refs.editProjectModal.openModal()},editProject:function(t){this.project=t.data.data},addVersionModal:function(){this.modalSchemaAddVersion.form.hiddenFields=[{name:"project_id",value:this.project.id}],this.$refs.addVersionModal.openModal()},addVersion:function(t){this.project.versions||(this.project.versions=[]),this.project.versions.push(t.data.data)},editVersionModal:function(t){this.modalSchemaEditVersion.form.url="/api/versions/"+t.id,this.modalSchemaEditVersion.form.fields=[{label:this.$t("version.title"),required:!0,name:"title",input:"text",type:"text",value:t.title,config:{}},{label:this.$t("version.end_date"),required:!0,name:"end_date",input:"date",type:"date",value:t.end_date,config:{}}],this.$refs.editVersionModal.openModal()},editVersion:function(t){var e=t.data.data,s=this.project.versions.findIndex((function(t){return t.id===e.uid}));this.project.versions.splice(s,1,e)},deleteVersionModal:function(t){}}},d=s(1),n=Object(d.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-detail"},[s("div",{staticClass:"row"},[t.loading?[s("div",{staticClass:"col-sm-4 col-12"},[s("content-placeholders",{staticClass:"mb-4"},[s("content-placeholders-heading"),t._v(" "),s("content-placeholders-text",{attrs:{lines:3}})],1),t._v(" "),s("content-placeholders",{staticClass:"mb-4"},[s("content-placeholders-heading"),t._v(" "),s("content-placeholders-text",{attrs:{lines:3}})],1)],1),t._v(" "),s("div",{staticClass:"col-sm-8 col-12"},t._l(3,(function(e){return s("content-placeholders",{key:e,staticClass:"mb-4"},[s("content-placeholders-heading"),t._v(" "),s("content-placeholders-text",{attrs:{lines:3}})],1)})),1)]:t.project?[s("div",{staticClass:"col-md-4 col-12"},[s("div",{staticClass:"card mb-4"},[s("div",{staticClass:"card-header"},[s("h5",{staticClass:"mb-0"},[t._v(t._s(t.project.slug)+": "+t._s(t.project.title))])]),t._v(" "),s("div",{staticClass:"card-body"},[s("p",{staticClass:"mb-1"},[s("strong",[t._v(t._s(t.$t("project.client.name"))+":")]),t._v(" "),s("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"clients.show",params:{id:t.project.client.id}}}},[t._v(t._s(t.project.client.name))])],1),t._v(" "),s("p",{staticClass:"mb-1"},[s("strong",[t._v(t._s(t.$t("project.status"))+":")]),t._v(" "+t._s(t.project.status))]),t._v(" "),s("p",{staticClass:"mb-1"},[s("strong",[t._v(t._s(t.$t("project.start_date"))+":")]),t._v(" "+t._s(t._f("date")(new Date(t.project.start_date),"DD.MM.YYYY")))]),t._v(" "),s("p",[s("strong",[t._v(t._s(t.$t("project.end_date"))+":")]),t._v(" "),t.project.end_date?[t._v(t._s(t._f("date")(new Date(t.project.end_date),"DD.MM.YYYY")))]:[t._v("-")]],2),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:t.editProjectModal}},[t._v(t._s(t.$t("project.edit.btn")))])])])])]),t._v(" "),s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h5",{staticClass:"mb-0"},[t._v(t._s(t.$t("project.team")))])]),t._v(" "),s("div",{staticClass:"card-body"},t._l(t.project.users,(function(e,a){return s("div",{key:e.id,staticClass:"d-flex",class:{"mb-2":a<t.project.users.length-1}},[e.photo?s("div",{staticClass:"pr-2 d-flex"},[s("img",{staticClass:"avatar avatar-sm",attrs:{src:e.photo,alt:e.fullName}})]):t._e(),t._v(" "),s("div",{staticClass:"d-flex align-items-center"},[s("p",{staticClass:"mb-0"},[t._v(t._s(e.fullName))])])])})),0)])]),t._v(" "),s("div",{staticClass:"col-md-8 col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col d-flex align-items-center"},[s("h5",{staticClass:"mb-0"},[t._v(t._s(t.$t("project.show.versions")))])]),t._v(" "),s("div",{staticClass:"col text-right"},[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:t.addVersionModal}},[t._v(t._s(t.$t("project.version.add.btn")))])])])]),t._v(" "),s("div",{staticClass:"card-body"},[t.project.versions&&t.project.versions.length>0?t._l(t.sortedVersions,(function(e,a){return s("div",{key:e.id,staticClass:"card",class:{"mb-4":a<t.project.versions.length-1}},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col d-flex align-items-center"},[s("h5",{staticClass:"mb-0"},[t._v(t._s(e.title)+" ("+t._s(t._f("date")(new Date(e.end_date),"DD.MM.YYYY"))+")")])]),t._v(" "),s("div",{staticClass:"col text-right"},[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(s){return t.editVersionModal(e)}}},[t._v(t._s(t.$t("project.version.edit.btn")))]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(s){return t.deleteVersionModal(e)}}},[t._v(t._s(t.$t("project.version.delete.btn")))])])])]),t._v(" "),s("div",{staticClass:"card-body"},[e.tasks&&e.tasks.length>0?void 0:[t._v("\n                                        "+t._s(t.$t("version.task.no_tasks"))+"\n                                    ")]],2)])})):[t._v("\n                            "+t._s(t.$t("project.version.no_versions"))+"\n                        ")]],2)])])]:t._e(),t._v(" "),s("custom-modal",{ref:"editProjectModal",attrs:{modalSchema:t.modalSchemaEditProject},on:{ok:t.editProject}}),t._v(" "),s("custom-modal",{ref:"addVersionModal",attrs:{modalSchema:t.modalSchemaAddVersion},on:{ok:t.addVersion}}),t._v(" "),s("custom-modal",{ref:"editVersionModal",attrs:{modalSchema:t.modalSchemaEditVersion},on:{ok:t.editVersion}})],2)])}),[],!1,null,null,null);e.default=n.exports}}]);