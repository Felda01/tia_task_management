(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{33:function(t,e,n){"use strict";n.r(e);var a=n(2);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={name:"ClientList",computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.b)(["isSenior"])),data:function(){return{loading:!1,clients:null,clientTypeOptions:[],modalSchemaAddClient:{form:{url:"/api/clients",method:"post",fields:[],hiddenFields:[],config:{}},modalRef:"addClient",modalTitle:this.$t("client.add.title"),okBtnTitle:this.$t("modal.add.btn")},errorCode:0}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.loading=!0,this.axios.get("/api/clients").then((function(e){t.clients=e.data.data,t.links=e.data.links,t.meta=e.data.meta,t.clientTypeOptions=e.data.meta.clientTypeOptions,t.loading=!1})).catch((function(e){t.errorCode=e.response.status,t.loading=!1}))},badgeType:function(t){switch(t){case"A":return"danger";case"B":return"primary";default:return"success"}},addClient:function(t){var e=t.data.data;this.$router.push({name:"clients.show",params:{id:e.id}})},addClientModal:function(){this.modalSchemaAddClient.form.fields=[{label:this.$t("client.name"),required:!0,name:"name",input:"text",type:"text",value:"",config:{}},{label:this.$t("client.type"),required:!0,name:"type",input:"select",type:"select",value:"B",config:{options:this.clientTypeOptions}},{label:this.$t("user.email"),required:!0,name:"email",input:"text",type:"email",value:"",config:{}},{label:this.$t("user.first_name"),required:!0,name:"first_name",input:"text",type:"text",value:"",config:{}},{label:this.$t("user.last_name"),required:!0,name:"last_name",input:"text",type:"text",value:"",config:{}}],this.$refs.addClientModal.openModal()}}},o=n(1),r=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"client-list"},[n("div",{staticClass:"row"},[t.loading?[n("div",{staticClass:"col-12"},[n("content-placeholders",{staticClass:"mb-4"},[n("content-placeholders-heading")],1)],1),t._v(" "),t._l(12,(function(e){return n("div",{staticClass:"col-lg-4 col-12"},[n("content-placeholders",{staticClass:"mb-4"},[n("content-placeholders-heading"),t._v(" "),n("content-placeholders-text",{attrs:{lines:3}})],1)],1)}))]:t.clients?[n("div",{staticClass:"col-12 mb-4 d-flex justify-content-between"},[n("h1",[t._v(t._s(t.$t("client_list.clients")))]),t._v(" "),t.isSenior?n("button",{staticClass:"btn btn-outline-primary",on:{click:t.addClientModal}},[t._v(t._s(t.$t("client_list.add.client.btn")))]):t._e()]),t._v(" "),t.clients.length>0?t._l(t.clients,(function(e){return n("div",{staticClass:"col-lg-4 col-12 mb-4"},[n("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"clients.show",params:{id:e.id}}}},[n("div",{staticClass:"card h-100"},[n("div",{staticClass:"card-header"},[n("h5",{staticClass:"mb-0"},[n("span",{class:"badge badge-"+t.badgeType(e.type)+" text-uppercase mr-2"},[t._v(t._s(e.type))]),t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"card-body"},[n("p",{staticClass:"font-weight-bold text-decoration-none text-black-50 mb-1"},[t._v("Projects:")]),t._v(" "),e.projects&&e.projects.length>0?[t._l(e.projects,(function(e){return[n("router-link",{staticClass:"text-decoration-none d-block",attrs:{to:{name:"projects.show",params:{slug:e.slug}}}},[t._v(t._s(e.slug)+": "+t._s(e.title))])]}))]:t._e()],2)])])],1)})):[n("div",{staticClass:"col-12"},[n("p",[t._v(t._s(t.$t("client.no_clients")))])])],t._v(" "),n("custom-modal",{ref:"addClientModal",attrs:{modalSchema:t.modalSchemaAddClient},on:{ok:t.addClient}})]:403===t.errorCode?[n("div",{staticClass:"col-12"},[n("error-forbidden")],1)]:404===t.errorCode?[n("div",{staticClass:"col-12"},[n("error-not-found")],1)]:t._e()],2)])}),[],!1,null,null,null);e.default=r.exports}}]);