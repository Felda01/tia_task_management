(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{32:function(t,e,i){"use strict";i.r(e);var a=i(2);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n={name:"ClientDetail",computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(a.b)(["isSenior"])),data:function(){return{client:null,loading:!1,errorCode:0,clientTypeOptions:[],modalSchemaEditClient:{form:{url:"/api/clients/"+this.$route.params.id,method:"put",fields:[],hiddenFields:[],config:{}},modalRef:"editClient",modalTitle:this.$t("client.edit.title"),okBtnTitle:this.$t("modal.edit.btn")},modalSchemaEditClientUser:{form:{url:"",method:"put",fields:[],hiddenFields:[],config:{}},modalRef:"editClientUser",modalTitle:this.$t("client.edit.user.title"),okBtnTitle:this.$t("modal.edit.btn")},modalSchemaAddProject:{form:{url:"/api/projects",method:"post",fields:[{label:this.$t("project.title"),required:!0,name:"title",input:"text",type:"text",value:"",config:{}},{label:this.$t("project.slug"),required:!0,name:"slug",input:"text",type:"text",value:"",config:{}},{label:this.$t("project.start_date"),required:!0,name:"start_date",input:"date",type:"date",value:"",config:{}},{label:this.$t("project.end_date"),required:!1,name:"end_date",input:"date",type:"date",value:"",config:{}}],hiddenFields:[],config:{}},modalRef:"addProject",modalTitle:this.$t("client.project.add.title.modal"),okBtnTitle:this.$t("modal.add.btn")}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.loading=!0,this.axios.get("/api/clients/"+this.$route.params.id).then((function(e){t.client=e.data.data,t.clientTypeOptions=e.data.meta.clientTypeOptions,t.loading=!1})).catch((function(e){t.errorCode=e.response.status,t.loading=!1}))},badgeType:function(t){switch(t){case"A":return"danger";case"B":return"primary";default:return"success"}},editClientModal:function(){this.modalSchemaEditClient.form.fields=[{label:this.$t("client.name"),required:!0,name:"name",input:"text",type:"text",value:this.client.name,config:{}},{label:this.$t("client.type"),required:!0,name:"type",input:"select",type:"select",value:this.client.type,config:{options:this.clientTypeOptions}}],this.$refs.editClientModal.openModal()},editClient:function(t){this.client=t.data.data},editClientUserModal:function(){this.modalSchemaEditClientUser.form.url="/api/users/"+this.client.user.id,this.modalSchemaEditClientUser.form.fields=[{label:this.$t("user.email"),required:!0,name:"email",input:"text",type:"email",value:this.client.user.email,config:{}},{label:this.$t("user.first_name"),required:!0,name:"first_name",input:"text",type:"text",value:this.client.user.first_name,config:{}},{label:this.$t("user.last_name"),required:!0,name:"last_name",input:"text",type:"text",value:this.client.user.last_name,config:{}}],this.$refs.editClientUserModal.openModal()},editClientUser:function(t){this.client.user=t.data.data},addProjectModal:function(){this.modalSchemaAddProject.form.hiddenFields=[{name:"client_id",value:this.client.id}],this.$refs.addProjectModal.openModal()},addProject:function(t){var e=t.data.data;this.$router.push({name:"projects.show",params:{slug:e.slug}})}}},c=i(1),o=Object(c.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"client-detail"},[i("div",{staticClass:"row"},[t.loading?[i("div",{staticClass:"col-12"},[i("content-placeholders",{staticClass:"mb-4"},[i("content-placeholders-heading",{attrs:{img:!0}})],1)],1),t._v(" "),i("div",{staticClass:"col-lg-4 col-12"},[i("content-placeholders",{staticClass:"mb-4"},[i("content-placeholders-heading"),t._v(" "),i("content-placeholders-text",{attrs:{lines:4}})],1)],1),t._v(" "),i("div",{staticClass:"col-lg-8 col-12"},[i("content-placeholders",{staticClass:"mb-4"},[i("content-placeholders-heading"),t._v(" "),i("content-placeholders-text",{attrs:{lines:8}})],1)],1)]:t.client?[i("div",{staticClass:"col-12 mb-4 d-flex flex-lg-row flex-column justify-content-lg-between align-items-lg-center"},[i("h1",{staticClass:"mb-lg-0 mb-3"},[i("span",{class:"badge badge-"+t.badgeType(t.client.type)+" text-uppercase mr-2"},[t._v(t._s(t.client.type))]),t._v(t._s(t.client.name))]),t._v(" "),t.isSenior?i("button",{staticClass:"btn btn-outline-primary",on:{click:t.editClientModal}},[t._v(t._s(t.$t("client.edit.btn")))]):t._e()]),t._v(" "),i("div",{staticClass:"col-lg-4 col-12 mb-4"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[i("h5",{staticClass:"mb-0"},[t._v(t._s(t.$t("client.show.contact")))]),t._v(" "),t.client.user&&t.isSenior?i("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:t.editClientUserModal}},[t._v(t._s(t.$t("client.edit.user.btn")))]):t._e()]),t._v(" "),i("div",{staticClass:"card-body"},[t.client.user?[i("div",{staticClass:"d-flex"},[t.client.user.photo?i("div",{staticClass:"pr-2"},[i("img",{staticClass:"avatar avatar-md",attrs:{src:t.client.user.photo,alt:t.client.user.fullName}})]):t._e(),t._v(" "),i("div",[i("p",{staticClass:"mb-1"},[t._v(t._s(t.client.user.fullName))]),t._v(" "),i("a",{attrs:{href:"mailto:"+t.client.user.email}},[t._v(t._s(t.client.user.email))])])])]:t._e()],2)])]),t._v(" "),i("div",{staticClass:"col-lg-8 col-12 mb-4"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col d-flex align-items-center"},[i("h5",{staticClass:"mb-0"},[t._v(t._s(t.$t("client.show.projects")))])]),t._v(" "),i("div",{staticClass:"col text-right"},[t.isSenior?i("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:t.addProjectModal}},[t._v(t._s(t.$t("client.project.add.btn")))]):t._e()])])]),t._v(" "),i("div",{staticClass:"card-body"},[t.client.projects&&t.client.projects.length>0?t._l(t.client.projects,(function(e,a){return i("router-link",{key:e.id,staticClass:"text-decoration-none d-block",class:{"mb-2":a<t.client.projects.length-1},attrs:{to:{name:"projects.show",params:{slug:e.slug}}}},[t._v(t._s(e.slug)+": "+t._s(e.title))])})):[t._v("\n                            "+t._s(t.$t("client.project.no_projects"))+"\n                        ")]],2)])]),t._v(" "),i("custom-modal",{ref:"editClientModal",attrs:{modalSchema:t.modalSchemaEditClient},on:{ok:t.editClient}}),t._v(" "),i("custom-modal",{ref:"editClientUserModal",attrs:{modalSchema:t.modalSchemaEditClientUser},on:{ok:t.editClientUser}}),t._v(" "),i("custom-modal",{ref:"addProjectModal",attrs:{modalSchema:t.modalSchemaAddProject},on:{ok:t.addProject}})]:403===t.errorCode?[i("div",{staticClass:"col-12"},[i("error-forbidden")],1)]:404===t.errorCode?[i("div",{staticClass:"col-12"},[i("error-not-found")],1)]:t._e()],2)])}),[],!1,null,null,null);e.default=o.exports}}]);